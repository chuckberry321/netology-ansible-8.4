# Домашнее задание к занятию "08.03 Использование Yandex Cloud"

## Подготовка к выполнению
1. Создайте свой собственный (или используйте старый) публичный репозиторий на github с произвольным именем.
2. Скачайте [playbook](./playbook/) из репозитория с домашним заданием и перенесите его в свой репозиторий.

## Основная часть
1. Допишите playbook: нужно сделать ещё один play, который устанавливает и настраивает kibana.
2. При создании tasks рекомендую использовать модули: `get_url`, `template`, `yum`, `apt`.
3. Tasks должны: скачать нужной версии дистрибутив, выполнить распаковку в выбранную директорию, сгенерировать конфигурацию с параметрами.
4. Приготовьте свой собственный inventory файл `prod.yml`.
5. Запустите `ansible-lint site.yml` и исправьте ошибки, если они есть.
```
vagrant@vagrant:~/netology-ansible-8.3$ ansible-lint site.yml
WARNING: PATH altered to include /usr/bin
WARNING  Overriding detected file kind 'yaml' with 'playbook' for given positional argument: site.yml
vagrant@vagrant:~/netology-ansible-8.3$
```

6. Попробуйте запустить playbook на этом окружении с флагом `--check`.
7. Запустите playbook на `prod.yml` окружении с флагом `--diff`. Убедитесь, что изменения на системе произведены.
8. Повторно запустите playbook с флагом `--diff` и убедитесь, что playbook идемпотентен.
9. Проделайте шаги с 1 до 8 для создания ещё одного play, который устанавливает и настраивает filebeat.
```
vagrant@vagrant:~/netology-ansible-8.3$ ansible-playbook -i inventory/prod/ site.yml

PLAY [Install Elasticsearch] ****************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
ok: [el-instance]

TASK [Download Elasticsearch's rpm] *********************************************************************************************************************************************************************************************************
changed: [el-instance]

TASK [Install rpm package Elasticsearch] ****************************************************************************************************************************************************************************************************
changed: [el-instance]

TASK [Configure Elasticsearch] **************************************************************************************************************************************************************************************************************
changed: [el-instance]

RUNNING HANDLER [restart Elasticsearch] *****************************************************************************************************************************************************************************************************
changed: [el-instance]

PLAY [Install Kibana] ***********************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
ok: [ki-instance]

TASK [Download Kibana's rpm] ****************************************************************************************************************************************************************************************************************
changed: [ki-instance]

TASK [Install rpm package Kibana] ***********************************************************************************************************************************************************************************************************
changed: [ki-instance]

TASK [Configure Kibana] *********************************************************************************************************************************************************************************************************************
changed: [ki-instance]

RUNNING HANDLER [restart Kibana] ************************************************************************************************************************************************************************************************************
changed: [ki-instance]

PLAY [Install filebeat] *********************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
ok: [application]

TASK [Download filebeat's rpm] **************************************************************************************************************************************************************************************************************
changed: [application]

TASK [Install rpm package Filebeat] *********************************************************************************************************************************************************************************************************
changed: [application]

TASK [Configure filebeat] *******************************************************************************************************************************************************************************************************************
changed: [application]

TASK [Set filebeat systemwork] **************************************************************************************************************************************************************************************************************
changed: [application]

TASK [Load Kibana dashboard] ****************************************************************************************************************************************************************************************************************
ok: [application]

RUNNING HANDLER [restart filebeat] **********************************************************************************************************************************************************************************************************
changed: [application]

PLAY RECAP **********************************************************************************************************************************************************************************************************************************
application                : ok=7    changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
el-instance                : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
ki-instance                : ok=5    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

vagrant@vagrant:~/netology-ansible-8.3$
```
10. Подготовьте README.md файл по своему playbook. В нём должно быть описано: что делает playbook, какие у него есть параметры и теги.
11. Готовый playbook выложите в свой репозиторий, в ответ предоставьте ссылку на него.

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
